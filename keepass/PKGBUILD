# Maintainer: David Macek <david.macek.0@gmail.com>

_realname=keepass
pkgbase="app-${_realname}"
pkgname=("app-i686-${_realname}")
epoch=1
pkgver=2.43
pkgrel=1
pkgdesc="Light-weight and easy-to-use password manager"
url="http://keepass.info/"
arch=('any')
license=('GPL2')
makedepends=("unzip")
provides=("${pkgbase}")
options=(!strip)
source=("KeePass2.zip::http://downloads.sourceforge.net/keepass/KeePass%202.x/${pkgver}/KeePass-${pkgver}.zip"
        "KeePass2-TrlUtil.zip::http://keepass.info/download/v2_trlutil_2/TrlUtil-${pkgver}.zip"
        "KPScript.zip::http://keepass.info/extensions/v2/kpscript/KPScript-${pkgver}.zip"
        "KeePass.config.xml"
        "KeePass2-Arabic.zip::http://downloads.sourceforge.net/keepass/KeePass-2.39-Arabic.zip"
        "KeePass2-Bulgarian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-Bulgarian.zip"
        "KeePass2-Burmese.zip::http://downloads.sourceforge.net/keepass/Burmese-2.19.zip"
        "KeePass2-Catalan.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-Catalan.zip"
        "KeePass2-Chinese_Simplified.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-Chinese_Simplified.zip"
        "KeePass2-Chinese_Traditional.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-Chinese_Traditional.zip"
        "KeePass2-Croatian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.29-Croatian.zip"
        "KeePass2-Czech.zip::http://downloads.sourceforge.net/keepass/KeePass-2.42-Czech.zip"
        "KeePass2-Danish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-Danish.zip"
        "KeePass2-Dutch.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-Dutch.zip"
        "KeePass2-Estonian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Estonian.zip"
        "KeePass2-Finnish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-Finnish.zip"
        "KeePass2-French-c.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-French-c.zip"
        "KeePass2-German.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-German.zip"
        "KeePass2-Greek.zip::http://downloads.sourceforge.net/keepass/KeePass-2.42-Greek.zip"
        "KeePass2-Hebrew-b.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-Hebrew-b.zip"
        "KeePass2-Hungarian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-Hungarian.zip"
        "KeePass2-Icelandic.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-Icelandic.zip"
        "KeePass2-Indonesian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.23-Indonesian.zip"
        "KeePass2-Italian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-Italian.zip"
        "KeePass2-Japanese.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-Japanese.zip"
        "KeePass2-Korean.zip::http://downloads.sourceforge.net/keepass/KeePass-2.36-Korean.zip"
        "KeePass2-Latin.zip::http://downloads.sourceforge.net/keepass/KeePass-2.29-Latin.zip"
        "KeePass2-Latvian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.40-Latvian.zip"
        "KeePass2-Lithuanian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-Lithuanian.zip"
        "KeePass2-Norwegian_NB.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-Norwegian_NB.zip"
        "KeePass2-Pashto.zip::http://downloads.sourceforge.net/keepass/KeePass-2.29-Pashto.zip"
        "KeePass2-Persian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.41-Persian.zip"
        "KeePass2-Polish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-Polish.zip"
        "KeePass2-Portuguese_BR.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-Portuguese_BR.zip"
        "KeePass2-Portuguese_PT.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-Portuguese_PT.zip"
        "KeePass2-Romanian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.22-Romanian.zip"
        "KeePass2-Russian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-Russian.zip"
        "KeePass2-Serbian_Cyrillic.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-Serbian_Cyrillic.zip"
        "KeePass2-Serbian_Latin.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-Serbian_Latin.zip"
        "KeePass2-Slovak.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-Slovak.zip"
        "KeePass2-Slovenian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.37-Slovenian.zip"
        "KeePass2-Spanish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-Spanish.zip"
        "KeePass2-Swedish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-Swedish.zip"
        "KeePass2-Turkish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-Turkish.zip"
        "KeePass2-Ukrainian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.43-Ukrainian.zip"
        "KeePass2-Vietnamese.zip::http://downloads.sourceforge.net/keepass/KeePass-2.42-Vietnamese.zip")
sha512sums=('b0430b8f26b7eea2bf55e564a7e205f75049be87025dda03bf60eb25acdd840c0d19c2231d4ea13b997e91dffff0b294b2196c7ad831d31964501d713ff7d2b2'
            '44fc9ed76a7a94a06d65ec95fd8ea3aaad86b8a0c397aa443b788f6a272fc352b4bef9a85c4bf13c9f3945aed20df3b8b929818d2453ac23c7b93763fae0684d'
            'a91b598bd790c877409a373a41742283111665d6b39458cf322a1c9c9775a06868dbcbb182d2f6070053482e8ad08023a6929fe6f877963d41e5c0fc14fd1fca'
            'be3675bbbe47d929a1ca6c5dfefd31b674c7304cc4bfac914d5be9656937554919478feb363fd3a51561bcf879941fcb54b701648057422c452bf677d500a839'
            '44eacfbbdf36938f992876689a447ce72a8f6e0cd8af84315ccb40fe86d4a76203a61a24edf58dad39a857366628ea5cb6cc84f2f5897ced12e89da18180d02d'
            '83b917fe8e43e99faca99401622d93fb2c17a094237fee53995c99875dffd97b90bf33dea7dec1d73ee729a430742c82095bfa94fccd05b1e8c48632bcbfb298'
            '8548df07918d101548e828e038bda9c593f909f17cd11cb568c987094b19ed66306f79e3e58d3128a3aeef20deb7061f9c1f1fc001e28aef355b42ec75a519d2'
            '306e2546e1586551b57e3b1c3f27649aceb36a8c8c2d6551abb9157629ba2bf648d3b53dedcd45ab1de3fe7d25c99cba508aaf8d132bc9c7161b587003be2ba6'
            '102c28ffa90a5aa7f35cccb57b38012196b417d1099f3cb8ba16a08ddb559e6126ddd585bec6910c29c3855bfee87d30cf4ff31aff3850e96543ab0195943ca7'
            'bf872cf4c50c0a1e58f5aeb932ea1fdb841b8de8338800d12f0ebb51e5b77c944500cdd90107ae6dae1f57816cd86b5b6332099abde6474d63717e2f4b445467'
            'a3584859709ef51bbf68f1703eb82178686d1694bdbf1a8ad992f6023bcfe67269313e1279e75c5450b59e693037dd93ab87285c8f43cb60e2dcd75bfc216020'
            '74966d108c35fc717e928e21c13101b96dad518fb3a49a7a5fc3b4fd60deafe7380ed7d8ffa4d1866594b7b104588e5462b18bcd6755cdb08cbc65e77563e591'
            '9603f67f04e0a7afd5674c131eb917e5dae558d555f234b166be45eb96d859ea3fc4e235fea3a8e0fcf47a17432083c6bb33a913bf3339efadb9013c20b72098'
            '46cc6a2d80238680c911c0e3e9c1bda9842faa573f22f473debfdafcda945bf7640eacb75a52d361c51e93719ced9f5b8270d01a260a9c780eb91de43858c5b7'
            '2ef568588a24db4777969f35afd5e803989ae4814bbda6c7fcb674c0b40791ba43dbbce3613f05324d7855c519642e10d7f14397fea7bc95b1b208afc1a62648'
            'df6d474ef298930789d465054525d45c45bec169e6087e4aca767126dea23bc3ce1d632be94eac38f6d930ad5d09b0385c07997f72b02e5c4eb0371eec1715ab'
            '7fe55d8a13fb2b1ac0f8584bb7a7ef7e4af40e9cee3654515a93f47c4d843d05b54343b20c264b53a66c232356501163b95e1575ab7fadd119dfe1d4f2b81d62'
            'dd702c3a76b07ee02e220a22dd7531d9eed551e0cd4b1d9d4b6094149dbfa39f52e2a89d241fe589cdc7d8c3f85ae597d15d6bdde075c3daba65915415d16c14'
            '317855ef39fcf6370467a4d3e2517ffbb7f1d60e6bf05ca6bc9d0f35c4ae95d2a17bc56d136386d338e22e14b5d2fb69bb9a285fdb632459d99fdb3f828fe159'
            '6330ec5779b877b702badfb813cfb28c32b6bbbe4f6271586f39a7f166eeb10228c31af0d5e4d98e7c0f8de48525d4756663d562f184ff79b2ce8c91dc2bfc9d'
            'b986f7ccfe5aecf4e55879a338f1725efcd911effa5ba5aedc34722ac8d1c037c0463918acbe85d281f36d863187f57066f94331c580a146c74613fd06fa1b55'
            'b3bb4efa6c2407685fd653f6abda7b64fb1174de692d71971c2ea9a2c5de2975cb69bb870f79e820373e4ea34291d805d89ea8dd714b01b3e1a9f27a51fc3473'
            'fc4926c62a7fa7bed1394535b7245b7abe3ac33af5f3e06bb6358dbf62fcfb967e4528f85043351ee1e030960627abc74afb8f6b145c6bf3ce56f81691ba18fb'
            '4eb85eb61feac79cd74ffded83f7f0b2f599dd7734a68388c03d9f4d5f853bf076eab780fc693921eb1559d1eaf1c7273a0c511af10de62d7282e2c88f70b3ab'
            '843de133a3ca8bfedaa35a3740105bb0acf37508c219e71402dc58324b630dede778f948dfe95e9137bb1ba81005ecfcc29cdd3c013c4b9fecd591bd3c0fd090'
            'a9acb1ec07163dd54f8a4a350ab13bc06f5738517f6ea57cf2798a7a1345dc4214ac05a7eb13944eaa03182b7e44781ade98dc97d708ee3842dee9fae8c833f3'
            'af80a6a57248c14ef710fdfac05531d42fe937105e62c15de4ecf16185e998b2c8719b4b32e1eb4bf1fc0b7cb577f97565a94d20778efd5ab65b59c5baddb3c2'
            '718cb6c39ccbf1d56d893f4f48be7114f91d600d2acb9c2927ee2d7512539d43e02253cc04263484478381820069f5b68ce43e82777e34c32bfba3deb9fff10c'
            '19da69a8603b8714d60fe01abfb6bc0972c4d463391a0eb4465a507b097d5a1c50d324d71870cb71df5b0afb28a4060bf229669b19ac4b47e15d12c6a6567c38'
            '4038da7f0a58e53d5f83ecd9e9ddd15bc750cbdf721b51397d91def9bcaf28016af2a2eee6cec6506ed2d2341185a1d38567c5139f123cad769398cbc3dec700'
            '17c185bbc43090d4d22e137441e97c868c4cd6417d120bc72509b008a85a8b0eab0ca0b4e4f7f3e8030b01dc0b5e126f2d71108f176bfef59133e43b651b093a'
            '5605b97a6110b7d362f8c35f2a145ec458f09f1605aa99a8115da41a042d26805caa211515504725eeaacd13182cf71d05827dd8a62594fb2860ce98d0b71ca2'
            'd0a4da547b740d2f9a48f7a5cea077ccc2dd744462df14ee141227249b99c263cc3eb78dad19f0a158c7b90f89456318a1f6497b2ca151c870e93b5b984877e0'
            '87ff0e3445fd7c68081c3f27e5e480d0081ac5a1f56e532d583f89d845d72e26390a7b5ef75cdb26a92f1b498fa3ef540e715f2d7cc2d51767eeda7944ef7ccc'
            'f55063ea3e498fcc5168915cd88b9c159038dd1fc60629501709970bb130ef1293aa207a0c4016d2b5fa0a113dcb7e5f968bfc93b1dfbafd1b54db349e0da0ae'
            'c5b393380b0ddbfe22ab48c4175d963a1d0e730afbf1835696708cf542ca30ead26b65d42628cb0b8fcb54ed1a545177ecb4720c21a2f86d8af4b0f3f2bc81e9'
            '04cd042e68ec94217058173ec0f1bda8633a6c9ffcb2b6a90f4feecfddaade6a5b73f2d2ce2520cccfcffcb9c117ea773e93f6e20e08a56bc47378e4602c72da'
            '257bcb207c240c98d435c7e63aa81ba1122b7e62cb5e0f326a5a109be72585e5d99250338803c1f144209f5a8262c6dccec8910b2b41afdc80b158af57cb9ba9'
            '11b0f4ebc477663f0d6b2537256cb65d359d755d71a392929d12f8c7a2de509120e65e4e40a2e3da7d1e42f1c6ab752a943bef2e0cc90ceb6d648018c83ad13a'
            '7f0285d08b06ce6de6e635abd9b717fcfdfa27bc834502ec721fddfa10bb26ee0585a14381719eb0728f53122746832a22186987e85205eafa85269e17241069'
            '1140d20e4ae6debb6a6ee39ebfb89d66089e893704b4a7969b36ff5977e8b9467e255e6017ea5874a6abbad4ae058339a0f96a08f07942ebec91f1a4b6f84d28'
            '8120f336b6353797f31d277e852e88cb231ce770fdba5dfb0f9196801eee42a7e4c2ec9d4204012314baee97e714574b2c463ca7f5592ab0a5bf193c3e01ccbd'
            '98ea2f0f70fd7afa3ba61aca881c941ed1739baae438cba05d759876ad008071fc47d415e62b0d33aac86475508148cf29913d0102d3d139c871335130acee83'
            'e87ee9250e2b1444371cf3eef4fc34a694fb4ecaecd8fb53a23ac9fa7bcc2a04b396711ed6890b123a8f2c1a7ae9ee1a9302f1db3bea6ccae151d84cc40d8385'
            '6ec927e255694f13f37daf25a29f71601556f46771e799aa47a5972140c13a27c609f9cfe4348cb0b9febf2c146138a267f9063c565c7529e11de305c0ed7073'
            '8303131a9abbc79f27ea58ea8191a478904ca58833f4ace5d660ae39215ebb7dc6652eba55b4c62796ec07a92368fb85d177882e84b574a9c7c5f5e955e8fa99')
noextract=("KeePass2-TrlUtil.zip")

prepare() {
    unzip -o "KeePass2-TrlUtil.zip" -d "TrlUtil"
    # when KPScript.exe is lowercased, it fails to load, so let's just keep everything as is
    # _lc *
}

package() {
    a="${pkgdir}/apps/${_realname}"
    mkdir -p "${a}"
    cp -r *.{exe,exe.config,dll} "KeePass.config.xml" "TrlUtil" "XSL" "Languages" "${a}"
    cp *.lngx "${a}/Languages"
    cp "KeePass.config.xml" "${a}/TrlUtil"
    cp *.{chm,txt} "${a}"
}
