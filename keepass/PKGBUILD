# Maintainer: David Macek <david.macek.0@gmail.com>

_realname=keepass
_apparch=32
pkgbase="app-${_realname}"
pkgname=("app-i686-${_realname}")
pkgver=2.38
pkgrel=1
pkgdesc="Light-weight and easy-to-use password manager"
url="http://keepass.info/"
arch=('any')
license=('GPL2')
makedepends=("unzip")
provides=("${pkgbase}")
options=(!strip)
source=("KeePass2.zip::http://downloads.sourceforge.net/${_realname}/KeePass%202.x/${pkgver}/KeePass-${pkgver}.zip"
        "KeePass2-TrlUtil.zip::http://keepass.info/download/v2_trlutil_2/TrlUtil-${pkgver}.zip"
        "KPScript.zip::http://keepass.info/extensions/v2/kpscript/KPScript-${pkgver}.zip"
        "KeePass.config.xml"
        "KeePass2-Arabic.zip::http://downloads.sourceforge.net/keepass/KeePass-2.36-Arabic.zip"
        "KeePass2-Bulgarian.zip::http://downloads.sourceforge.net/keepass/Bulgarian-2.10.zip"
        "KeePass2-Burmese.zip::http://downloads.sourceforge.net/keepass/Burmese-2.19.zip"
        "KeePass2-Catalan.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Catalan.zip"
        "KeePass2-Chinese_Simplified.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Chinese_Simplified.zip"
        "KeePass2-Chinese_Traditional.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Chinese_Traditional.zip"
        "KeePass2-Croatian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.29-Croatian.zip"
        "KeePass2-Czech.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Czech.zip"
        "KeePass2-Danish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.36-Danish.zip"
        "KeePass2-Dutch.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Dutch.zip"
        "KeePass2-Estonian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Estonian.zip"
        "KeePass2-Finnish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Finnish.zip"
        "KeePass2-French.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-French.zip"
        "KeePass2-German.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-German.zip"
        "KeePass2-Greek.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Greek.zip"
        "KeePass2-Hebrew-b.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-Hebrew-b.zip"
        "KeePass2-Hungarian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Hungarian.zip"
        "KeePass2-Icelandic.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Icelandic.zip"
        "KeePass2-Indonesian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.23-Indonesian.zip"
        "KeePass2-Italian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Italian.zip"
        "KeePass2-Japanese.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Japanese.zip"
        "KeePass2-Korean.zip::http://downloads.sourceforge.net/keepass/KeePass-2.36-Korean.zip"
        "KeePass2-Latin.zip::http://downloads.sourceforge.net/keepass/KeePass-2.29-Latin.zip"
        "KeePass2-Latvian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Latvian.zip"
        "KeePass2-Lithuanian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Lithuanian.zip"
        "KeePass2-Norwegian_NB.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Norwegian_NB.zip"
        "KeePass2-Pashto.zip::http://downloads.sourceforge.net/keepass/KeePass-2.29-Pashto.zip"
        "KeePass2-Persian.zip::http://downloads.sourceforge.net/keepass/Persian-2.08.zip"
        "KeePass2-Polish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Polish.zip"
        # "KeePass2-Portuguese_BR.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Portuguese_BR.zip" # Unsupported ZIP compression method (deflation-64-bit)
        "KeePass2-Portuguese_PT.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Portuguese_PT.zip"
        "KeePass2-Romanian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.22-Romanian.zip"
        "KeePass2-Russian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Russian.zip"
        "KeePass2-Serbian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.23-Serbian.zip"
        "KeePass2-Slovak.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Slovak.zip"
        "KeePass2-Slovenian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.37-Slovenian.zip"
        "KeePass2-Spanish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Spanish.zip"
        "KeePass2-Swedish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.30-Swedish.zip"
        "KeePass2-Turkish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Turkish.zip"
        "KeePass2-Ukrainian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Ukrainian.zip"
        "KeePass2-Vietnamese.zip::http://downloads.sourceforge.net/keepass/KeePass-2.38-Vietnamese.zip")
sha512sums=('4de214940ec0253896cff6a274fcc9d857004b87a687212976168bf0a69f4050299fd55d5c2fa55a3a42991d81ce62c89c2fe6b27fe4f066361fd8f0ea2be6af'
            '83f2c87da7b4ad7a9b4695cfcf9606ed056d427349ae1bd82391e157e03c9af365506aa0ab9d983f96b5d6f690118871251b411ee3dbad99352dcbb0a7d67d98'
            'cb8c31c5f6c3be4f28fb05d091413ebec7fd9c2b3deeaffd1be51111da2b9628ad540ac52aad0dacc7c1b6625376ef5038dc1d59060392fc573d215fd7b11b69'
            'be3675bbbe47d929a1ca6c5dfefd31b674c7304cc4bfac914d5be9656937554919478feb363fd3a51561bcf879941fcb54b701648057422c452bf677d500a839'
            '3f9b28d10ccbe4c927bda11b4657f5cb6c65492a48445d0063294e96d5f8a908253fe00f09702dc00d8c147948525189bc475561374f5c487ebdf3be025248e1'
            '121984df8a67b46d243113637227fe36d7b65a699a30704435e65c5c7003d28552dfe3510759db4e149c274eaa18f92232b60faa18f9e4312f87012c95579ff8'
            '8548df07918d101548e828e038bda9c593f909f17cd11cb568c987094b19ed66306f79e3e58d3128a3aeef20deb7061f9c1f1fc001e28aef355b42ec75a519d2'
            'ff8888c21c38fc4ea385b4ff5a9747121ae11a4bfe79c4cdebb2ea0a8520d3c24b53c05cdc8acd1f562150fa0807e402ccd5e242d419e288cb6bd24226182638'
            '7f202cd550dc4e118091ecccf35acc5bd03ebbe785eafc6d0c543f98bcac180f515574b22c74d247d164ce4b951b9b43b9fa465f50cb28556e608d9e3a41a555'
            '64df1c8be80c5c5e408dc3a4f13489ec5b8005257d266fc773969079417f5f1d741040773d51a3ea99073eda6a9b54c03519a7840906e2e7d95063e6aa3c9608'
            'a3584859709ef51bbf68f1703eb82178686d1694bdbf1a8ad992f6023bcfe67269313e1279e75c5450b59e693037dd93ab87285c8f43cb60e2dcd75bfc216020'
            '8b5de4158c7a34c37653ef9961f3e4a2f3c1792be25900798a626dd9c471e1eb7d1e87e22e62c1dd8a10fc9fc51a05b1de946b6e1ecc82448060868f18941358'
            '0c5558cdcffdbf9073074439aabc9e89c732a3257514fb7681a376c4c3ded3f8142fc018ecb798339b80b6e3661873642322afc27dedcbb2562b1920db914c3e'
            '814746173b8f700d333d1aba0ed20b97bfbd4cdc4c462b202414a3f0f2b30f16118692cacb326fa85f2f9f960cf9121a86c6ef22c19a86048d574b0be92175c8'
            '2ef568588a24db4777969f35afd5e803989ae4814bbda6c7fcb674c0b40791ba43dbbce3613f05324d7855c519642e10d7f14397fea7bc95b1b208afc1a62648'
            '34c187f3abc263bea88a1e7caebe188cdec977c1e140582403b39e34741c7582dbab5f5ab6173702e522555bbfc697da18eedc48acdb005d9bf28414c58a2190'
            '6ce95b0e91ff407345be1388739a3bfb3a45a4eaa45cfc6df400fe1dc57854946cc6f4f73f7c59e095924f9c1700d8ecb8aaa8437c5b92474d5b2c9c7136184e'
            '98addc3f193640694edaabb86741ab196593909f5ace7f1974dbfe2bf22c6d898afa0ca69c847e9f3c35aa84002b0a461c42cca7ff9020bad17a75437cc27309'
            'a7d9afae93fa8140cfccd0835163c09e6ff6af5a44243c3baee97026b57a42ff69a86385657aee618fe026a7a4b8f759e0e104041b6156303e5c437e0cf4a325'
            '6330ec5779b877b702badfb813cfb28c32b6bbbe4f6271586f39a7f166eeb10228c31af0d5e4d98e7c0f8de48525d4756663d562f184ff79b2ce8c91dc2bfc9d'
            '3163390f9cfa85d15f9c6e049a321d916c2b07cb22d04ce38f87c3c29e00cfa5bdec29520fc1ddcf911329209a8d3d1d84648e28fb8986cbb7a0a2e787a779ac'
            '7e55f37203ee9a3046491876eaaac391a3a86e8192ebf215777425ff7432d5faf39ab3bc36e8e5401baa87e881984626a745d7892563850d64706110312296f9'
            'fc4926c62a7fa7bed1394535b7245b7abe3ac33af5f3e06bb6358dbf62fcfb967e4528f85043351ee1e030960627abc74afb8f6b145c6bf3ce56f81691ba18fb'
            '284f3a8cc573d7a99a2f92d9d55954903d28a2cf090c1da111500d6a040d39763e42612caf3300f65ab15e19df688d4ac5e1d7d05637880beb12cf069b330247'
            'b3ae036e8d0faa7fba8b025c4d04d8b2b16f5dab527b04c6ecc2b8b8d343e5aad4be478679a17175e64b68fcf3b2087d79219374c4411a75ed4c7a8705c12539'
            'a9acb1ec07163dd54f8a4a350ab13bc06f5738517f6ea57cf2798a7a1345dc4214ac05a7eb13944eaa03182b7e44781ade98dc97d708ee3842dee9fae8c833f3'
            'af80a6a57248c14ef710fdfac05531d42fe937105e62c15de4ecf16185e998b2c8719b4b32e1eb4bf1fc0b7cb577f97565a94d20778efd5ab65b59c5baddb3c2'
            'd846742596bc6758d81cb199764a1bb8f95dc3047a593c358286c56cef5bfa5eebee8f1aa5fc744ea2ee090c8c02e54a72bb6847f23b0a7945d8f4f53955608d'
            '3a2dadbd16c50966382a41cdbc3505ffa3becbf04833444fde1849ceadd32b40e7334020ec07191b3190cf18098aa83c031e629bff46ce81dac876e030effd75'
            'c5f14eac45f03022b5adfe5e1385ce9c4d27cd7d848a4c1c96ea9608b4cd45b7afd283e0ad81d004241516d1cedb8fe915d5b8456e9c8aba97efda86898621dc'
            '17c185bbc43090d4d22e137441e97c868c4cd6417d120bc72509b008a85a8b0eab0ca0b4e4f7f3e8030b01dc0b5e126f2d71108f176bfef59133e43b651b093a'
            '2c274ae696d20299aaa9b9c7f5fe22876fee9c852e1a6f6cfe31b137f5df6d55dc38565df86e3fa567ed20e9af71c59b33821a08d825f0ee2edbf81f86d21da3'
            '00e946357f67acbc05fe89a91ce5b28284fc5a2de74b83972560e9c9aab86523afc74e61e703fb4d5f2aefd415ca2bdf69884dfed5aab6243b42bd19cd42daf7'
            '3e4492ec1e80d32883d859d40bff8ffcaca7e0af0b1aa809d43f8fef6941d7ffb5c8f47115c49f259039a48d1260395b437eb72c8a52bba8d75a2478094172d0'
            'c5b393380b0ddbfe22ab48c4175d963a1d0e730afbf1835696708cf542ca30ead26b65d42628cb0b8fcb54ed1a545177ecb4720c21a2f86d8af4b0f3f2bc81e9'
            '30626b8477d67e1a785addc83dbaabe4a94a87ff1d7c9ba02e43d200cba36a491eaca4f3dafb42cd37a30f793663073c3b9eba750c71ab9d01be857a616edf7f'
            'e5b90aa6dea5a635020b4b6906ec230f894113320be33db5d9b56cb82c27919c9364fbf97c55f7214daa4b69292583b93690470cb0f8fda778fb1043ccd9644e'
            '26ee17854f43f14505cf5a208394263135317259fd777cf80c738862edbbf959839eb60ccdad8bf1fbcac8dfd379a7dca3a8dc83aa53a1186a1a4610376fc230'
            '1140d20e4ae6debb6a6ee39ebfb89d66089e893704b4a7969b36ff5977e8b9467e255e6017ea5874a6abbad4ae058339a0f96a08f07942ebec91f1a4b6f84d28'
            '1c9c1a725987ba0ec3f95c86faa551028f5774504ebb7a449595d3df047d9619113e586d22b80a933ccfe43332d86004f1e8cd28ec6fa45c969f64a0e48c67b8'
            'e8dc39021d8b66ad14fa839103904a4ffa3b885941857475160ef81079d39cb302b456d54cde9c1db61bfce1f822fad40bddeb0e95b86bd8f7be621c70e352ce'
            '5a47d4dbd5fdc7aa03de59e2e6501646f2f8fa62d5e3b5b70fd616e9053387940ba71a01403b2f8a4fee2627d7f53a2c079d6302029b1eca6723187c95de4518'
            'baa4ee4fd9d7f532b5ecfb543b33bcc042129d25379f12054923ded52ec3d16ef04966d1867f2177ef482ae8e7e96a60d4c24a5e33427b1ebd53639d8523dbe0'
            'cba60a132b5692f41f9a41a8f67eb439ac0cc4c76495f77e8d592cbf5f29985deea49b90b4bdfc7633d9ee670ddcf90ef371144d1ebf83416d1942effcec178c')
noextract=("KeePass2-TrlUtil.zip")

prepare() {
    unzip -o "KeePass2-TrlUtil.zip" -d "TrlUtil"
    # when KPScript.exe is lowercased, it fails to load, so let's just keep everything as is
    # _lc *
}

package() {
    a="${pkgdir}/apps${_apparch}/${_realname}"
    mkdir -p "${a}"
    cp -r *.{exe,exe.config,dll,lngx} "KeePass.config.xml" "TrlUtil" "XSL" "${a}"
    cp "KeePass.config.xml" "${a}/TrlUtil"

    d="${pkgdir}/docs${_apparch}/${_realname}"
    mkdir -p "${d}"
    cp *.{chm,txt} "${d}"
}
