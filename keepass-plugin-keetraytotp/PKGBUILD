# Maintainer: David Macek <david.macek.0@gmail.com>

_realname=keepass-plugin-keetraytotp
_dirname=keepass
pkgbase="app-${_realname}"
pkgname=("app-i686-${_realname}")
epoch=1
pkgver=0.106.0
pkgrel=1
pkgdesc="A KeePass plugin that adds TOTP to tray menu, entry list and Auto-Type"
url="https://github.com/KeeTrayTOTP/KeeTrayTOTP"
arch=('any')
license=('GPL3')
provides=("${pkgbase}")
replaces=("app-i686-keepass-plugin-tray-totp")
options=(!strip)
source=("KeeTrayTotp.plgx::https://github.com/KeeTrayTOTP/KeeTrayTOTP/releases/download/v${pkgver}/KeeTrayTOTP.plgx"
        "KeeTrayTOTP.zip::https://github.com/KeeTrayTOTP/KeeTrayTOTP/archive/v${pkgver}.zip")
sha512sums=('c4ca464cc73e128f769db1f8568e8bcffa6a4caecd9b224cbfacd759c57adadc38a840d7b68730f3390006b218f784c83a721a6678c823a9a1d7083ec924446a'
            'd0a473e33dda1e7d1e73dfc2f317efaf67358ddc3879a67f5e9b49e3e03958970dea66b3db9918397de53b15d3d14679ac39e237c9c50fd8d7c99d2b649a2973')

package() {
    depends=("app-keepass")

    local a="${pkgdir}/apps/${_dirname}"
    mkdir -p "${a}/Plugins" "${a}/Plugins/keetraytotp"
    cp *.plgx "${a}/Plugins"
    cp -R "KeeTrayTOTP-${pkgver}"/{README.md,LICENSE,docs/*} "${a}/Plugins/keetraytotp"
}
