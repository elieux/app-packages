# Maintainer: David Macek <david.macek.0@gmail.com>

_realname=keepass
_apparch=32
pkgbase="app-${_realname}"
pkgname=("app-i686-${_realname}")
pkgver=2.37
pkgrel=1
pkgdesc="Light-weight and easy-to-use password manager"
url="http://keepass.info/"
arch=('any')
license=('GPL2')
makedepends=("unzip")
provides=("${pkgbase}")
options=(!strip)
source=("KeePass2.zip::http://downloads.sourceforge.net/${_realname}/KeePass%202.x/${pkgver}/KeePass-${pkgver}.zip"
        "KeePass2-TrlUtil.zip::http://keepass.info/download/v2_trlutil_2/TrlUtil-${pkgver}.zip"
        "KPScript.zip::http://keepass.info/extensions/v2/kpscript/KPScript-${pkgver}.zip"
        "KeePass.config.xml"
        "KeePass2-Bulgarian.zip::http://downloads.sourceforge.net/keepass/Bulgarian-2.10.zip"
        "KeePass2-Burmese.zip::http://downloads.sourceforge.net/keepass/Burmese-2.19.zip"
        "KeePass2-Catalan.zip::http://downloads.sourceforge.net/keepass/KeePass-2.37-Catalan.zip"
        "KeePass2-Chinese_Simplified.zip::http://downloads.sourceforge.net/keepass/KeePass-2.34-Chinese_Simplified.zip"
        "KeePass2-Chinese_Traditional.zip::http://downloads.sourceforge.net/keepass/KeePass-2.37-Chinese_Traditional.zip"
        "KeePass2-Croatian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.29-Croatian.zip"
        "KeePass2-Czech.zip::http://downloads.sourceforge.net/keepass/KeePass-2.36-Czech.zip"
        "KeePass2-Danish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.36-Danish.zip"
        "KeePass2-Dutch.zip::http://downloads.sourceforge.net/keepass/KeePass-2.37-Dutch.zip"
        "KeePass2-Estonian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.37-Estonian.zip"
        "KeePass2-Finnish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.36-Finnish.zip"
        "KeePass2-French.zip::http://downloads.sourceforge.net/keepass/KeePass-2.37-French.zip"
        "KeePass2-German.zip::http://downloads.sourceforge.net/keepass/KeePass-2.37-German.zip"
        "KeePass2-Greek.zip::http://downloads.sourceforge.net/keepass/KeePass-2.21-Greek.zip"
        "KeePass2-Hebrew-b.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-Hebrew-b.zip"
        "KeePass2-Hungarian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.37-Hungarian.zip"
        "KeePass2-Icelandic.zip::http://downloads.sourceforge.net/keepass/KeePass-2.37-Icelandic.zip"
        "KeePass2-Indonesian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.23-Indonesian.zip"
        "KeePass2-Italian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.37-Italian.zip"
        "KeePass2-Japanese.zip::http://downloads.sourceforge.net/keepass/KeePass-2.37-Japanese.zip"
        "KeePass2-Korean.zip::http://downloads.sourceforge.net/keepass/KeePass-2.36-Korean.zip"
        "KeePass2-Latin.zip::http://downloads.sourceforge.net/keepass/KeePass-2.29-Latin.zip"
        "KeePass2-Latvian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.37-Latvian.zip"
        "KeePass2-Lithuanian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.36-Lithuanian.zip"
        "KeePass2-Norwegian_NB.zip::http://downloads.sourceforge.net/keepass/KeePass-2.36-Norwegian_NB.zip"
        "KeePass2-Pashto.zip::http://downloads.sourceforge.net/keepass/KeePass-2.29-Pashto.zip"
        "KeePass2-Persian.zip::http://downloads.sourceforge.net/keepass/Persian-2.08.zip"
        "KeePass2-Polish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.37-Polish.zip"
        "KeePass2-Portuguese_BR.zip::http://downloads.sourceforge.net/keepass/KeePass-2.37-Portuguese_BR.zip"
        "KeePass2-Portuguese_PT.zip::http://downloads.sourceforge.net/keepass/KeePass-2.37-Portuguese_PT.zip"
        "KeePass2-Romanian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.22-Romanian.zip"
        "KeePass2-Russian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.37-Russian.zip"
        "KeePass2-Serbian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.23-Serbian.zip"
        "KeePass2-Slovak.zip::http://downloads.sourceforge.net/keepass/KeePass-2.37-Slovak.zip"
        "KeePass2-Slovenian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.37-Slovenian.zip"
        "KeePass2-Spanish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.37-Spanish.zip"
        "KeePass2-Swedish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.30-Swedish.zip"
        "KeePass2-Turkish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.37-Turkish.zip"
        "KeePass2-Ukrainian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.37-Ukrainian.zip"
        "KeePass2-Vietnamese.zip::http://downloads.sourceforge.net/keepass/KeePass-2.36-Vietnamese.zip")
sha512sums=('18599c9ce096ce4b3cf0bc6f68e3c9c91a643c7dddfb35a3ed52d3230afc169f0c88376ce1278936c594a56085875169f76bd626c175189bff64b07c905cae4e'
            '170418fa882d386d4f58de969a26d5b6a17e398e300f385c0620bb23d3a385a0f19c7d3999ba827a39979aa2d9e97bb207876dae36fe7c815a645f048dea0057'
            '102f2b315164912de79ad18caf40b81fb30311d02ca0bf52aa271bfa883d7cd68050a045f7e7ce8fa5cff4479705e9242df21e3735492d10ab3240efa7f0f3db'
            'be3675bbbe47d929a1ca6c5dfefd31b674c7304cc4bfac914d5be9656937554919478feb363fd3a51561bcf879941fcb54b701648057422c452bf677d500a839'
            '121984df8a67b46d243113637227fe36d7b65a699a30704435e65c5c7003d28552dfe3510759db4e149c274eaa18f92232b60faa18f9e4312f87012c95579ff8'
            '8548df07918d101548e828e038bda9c593f909f17cd11cb568c987094b19ed66306f79e3e58d3128a3aeef20deb7061f9c1f1fc001e28aef355b42ec75a519d2'
            '9830b87adee3a225a2421d51fc6ad40f36c0ab5534fde4cf74348903fac635e48de2bf39d68ea7de5c02ceee0dac750f0682e1af178e74c61dccf8bf0ca8f9d0'
            '39b635e0c770cd4d4e624a4a591622198fa9db8fd2a3cd2478283daa1ec3b002d4bbfbdbd26a1a577f47eafb6c65999d2347a6afd00506f7e31f67af217f1c0b'
            '442528e9c501cd5a54361c13475629244f65fc933a4ee4c861905acfb55578b021d63d9c61669ae4918223553ff5aa4425afd5d8cb8b01eb04b21041e96523c1'
            'a3584859709ef51bbf68f1703eb82178686d1694bdbf1a8ad992f6023bcfe67269313e1279e75c5450b59e693037dd93ab87285c8f43cb60e2dcd75bfc216020'
            'fd5dee2edf003ba255e9a3f5a7a8418a69eb2dad9ce54e6ca35874dde5ca51b39fb33d607bb693d536a925ab307a47052683fc84a401677699305f66d3184314'
            '0c5558cdcffdbf9073074439aabc9e89c732a3257514fb7681a376c4c3ded3f8142fc018ecb798339b80b6e3661873642322afc27dedcbb2562b1920db914c3e'
            'aba4e2e4b510e5c8b9c33bb7e7164b07757f1b5f87a32e8d78e27d578b1ada4fba69a52782f9c6a7459d00095d7b62bd8d00a54bfe8574ca189893b18f3660e5'
            '0852ef4de97fa7de6001fbfc31b950ce885aff97e9b8de3ce3e8671f8055be1ea405b7a97e52a2c44be959cc0adbb215153859bf5d602a3371c4ce7345607e6e'
            '3d4d66396cc3cd5fd89af1ecfe13cb5ee7643e3850b64a251f34e688d377be3c6094cbc13d7289066f68541b7836255315b42b3cedfc76ff26e8fe7829b198d5'
            '7e56db0fd3b97a793769194746e27f25a5f5554d5e59677f7b4f12de9b9bb66bc58f9d39ee82b3c11c5450b1f330d92113fc86ee3e5b010a447ef45b4e6d986c'
            '2cf85a0ca0bab3fa6dbac4ac9d79fc7d33e19d46e709a13264d15c296a4e9485ebe722364c619d9a53d0e6dc427a17c2644b12f276b1f61c26a481d8c6b58c17'
            'c26806030b4fa681a781f5fff6fb88fcc4cc25672d163de4f78a81fe70e5d0a54cadda9667756ab8461aaef42a1d3183e5b9baa2dd1654acfa16672238b82173'
            '6330ec5779b877b702badfb813cfb28c32b6bbbe4f6271586f39a7f166eeb10228c31af0d5e4d98e7c0f8de48525d4756663d562f184ff79b2ce8c91dc2bfc9d'
            'db3000552784c3ba37af9baae3de763dbaf9fd0e50b34926b01510ccc5a177fd10a2a3eb073fecf0538bffe9910947a38e6d164fbdfed1f7ef67a0ad51d97cda'
            'bd2cd588edd3e38b49602046259c26abdd5d7edd48ebb428d6fbd35965807ce8202d0f85db310736bb10c035e01d61c482c7bba839b4c4c1aa8e263a555b0402'
            'fc4926c62a7fa7bed1394535b7245b7abe3ac33af5f3e06bb6358dbf62fcfb967e4528f85043351ee1e030960627abc74afb8f6b145c6bf3ce56f81691ba18fb'
            'd315b0627d43610485520421c71d74620157312cf0d015eba8e7661a82a1fcc75db20641272a1fa5209988407179f2ec7c182817f58ec2b46974c8f715158011'
            'f8ac3afd8ce630c1a47810a05a38f960f683fdcd01377c00c979757d4ad23f68d9b8b7ed3711c6bc355f8934bdd39f5b668829d32e1d188f9962f88b121348cc'
            'a9acb1ec07163dd54f8a4a350ab13bc06f5738517f6ea57cf2798a7a1345dc4214ac05a7eb13944eaa03182b7e44781ade98dc97d708ee3842dee9fae8c833f3'
            'af80a6a57248c14ef710fdfac05531d42fe937105e62c15de4ecf16185e998b2c8719b4b32e1eb4bf1fc0b7cb577f97565a94d20778efd5ab65b59c5baddb3c2'
            'de0eb9f143936358f77dd692f39c8e242cefca4f5a29cea58229ee97e5617d5427dd29482af9196e6c932e5b58ec212295fe22465467978248293083871b1275'
            '064ae98951b14c3df93ff6cdfe6f5c01dcb773952158d6ea99a84fdde8a985ecbd58f43dff1d10a51a4c9496ab958748ed7e08ea5d48cb1763464a73721c5b0b'
            '4c8b85b06224de32e9d481c178f2e6560d7f2cc22549921452ddc2b0af43f30cb9534652784c8825dfdeea2eaa5d3578d65207294b64b62532f1fff74a024c87'
            '17c185bbc43090d4d22e137441e97c868c4cd6417d120bc72509b008a85a8b0eab0ca0b4e4f7f3e8030b01dc0b5e126f2d71108f176bfef59133e43b651b093a'
            '2c274ae696d20299aaa9b9c7f5fe22876fee9c852e1a6f6cfe31b137f5df6d55dc38565df86e3fa567ed20e9af71c59b33821a08d825f0ee2edbf81f86d21da3'
            '163910044cd501794626da2dfca940c09012f69d5660ec7d616482e37b19c868d8dd1f6f6b8d23c570e4194d54c07442e0dfe10b4b7a6f52f50fa23757ca6ce9'
            '7608cfb45129f3e6c1941d26659e820f626227721571f122091c5543fbd26c4aee10a9a06617e188134c4cae3b4c20fbc679e50014564e95d03eed1af5ddde0c'
            'fa31405c7c41ace010643d20213673471c4fb9288faa0ab2444f56fb282e7e3d7018667178f4936c8d5af8915f4a77906e4262ef42cd08b22ee3e3e89ce94f39'
            'c5b393380b0ddbfe22ab48c4175d963a1d0e730afbf1835696708cf542ca30ead26b65d42628cb0b8fcb54ed1a545177ecb4720c21a2f86d8af4b0f3f2bc81e9'
            '6576dade05b85ced310ac31bc48356f312895414bff51d0f9ebfb7762fee36fc94f63dc44215589ccaff9205c404f22b907a8e039311ef0846f17aade3a87f26'
            'e5b90aa6dea5a635020b4b6906ec230f894113320be33db5d9b56cb82c27919c9364fbf97c55f7214daa4b69292583b93690470cb0f8fda778fb1043ccd9644e'
            '22780b319c8fde9dbe30b747c4b79f0db51212cf1217f9198ffb377bfa35dc750e194bd97d43f0d850e4c98e6d60e6a2dbe92d6647e0747f33c465fa1a8364cb'
            '1140d20e4ae6debb6a6ee39ebfb89d66089e893704b4a7969b36ff5977e8b9467e255e6017ea5874a6abbad4ae058339a0f96a08f07942ebec91f1a4b6f84d28'
            'c17275b4acb9ae18fc879d30bb16f92898bb92cf4df1834bbb4918cfd632db091e45ca991541b760990bcf58fb64a410a59287a8b7c0565199af5a93141c3bd1'
            'e8dc39021d8b66ad14fa839103904a4ffa3b885941857475160ef81079d39cb302b456d54cde9c1db61bfce1f822fad40bddeb0e95b86bd8f7be621c70e352ce'
            '9bf0b951d5a8e569550e85d0aaf6afac3981628f977b8b3b7984986d1a0ef961569e8b00e1439ecdbd05fe4a9cdf52398f57ac7a63a84fd7b4e73c8d12b1514d'
            'f243b8bc0065857d30d0d142a9aae6dbb4861f78e081d34faaffabf85771bd87ac088f236bcae51713c996ffa08521a168308411b7b0570dde2f29717b1d3d73'
            'f1166d9e1013c774bf4236f27f3b53b800d656786f22d70e7188ec9fbbdafc253107f0636729021fdb78700322cd31b5ddc870d9160308585380b5b48b2566d6')
noextract=("KeePass2-TrlUtil.zip")

prepare() {
    unzip -o "KeePass2-TrlUtil.zip" -d "TrlUtil"
    # when KPScript.exe is lowercased, it fails to load, so let's just keep everything as is
    # _lc *
}

package() {
    a="${pkgdir}/apps${_apparch}/${_realname}"
    mkdir -p "${a}"
    cp -r *.{exe,exe.config,dll,lngx} "KeePass.config.xml" "TrlUtil" "XSL" "${a}"
    cp "KeePass.config.xml" "${a}/TrlUtil"

    d="${pkgdir}/docs${_apparch}/${_realname}"
    mkdir -p "${d}"
    cp *.{chm,txt} "${d}"
}
