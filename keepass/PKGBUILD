# Maintainer: David Macek <david.macek.0@gmail.com>

_realname=keepass
_apparch=32
pkgbase="app-${_realname}"
pkgname=("app-i686-${_realname}")
pkgver=2.34
pkgrel=2
pkgdesc="Light-weight and easy-to-use password manager"
url="http://keepass.info/"
arch=('any')
license=('GPL2')
makedepends=("unzip")
provides=("${pkgbase}")
options=(!strip)
source=("KeePass2.zip::http://downloads.sourceforge.net/${_realname}/KeePass%202.x/${pkgver}/KeePass-${pkgver}.zip"
        "KeePass2-TrlUtil.zip::http://keepass.info/download/v2_trlutil/TrlUtil-${pkgver}.zip"
        "KPScript.zip::http://keepass.info/extensions/v2/kpscript/KPScript-${pkgver}.zip"
        "KeePass.config.xml"
        "KeePass2-Bulgarian.zip::http://downloads.sourceforge.net/keepass/Bulgarian-2.10.zip"
        "KeePass2-Burmese.zip::http://downloads.sourceforge.net/keepass/Burmese-2.19.zip"
        "KeePass2-Chinese_Simplified.zip::http://downloads.sourceforge.net/keepass/KeePass-2.34-Chinese_Simplified.zip"
        "KeePass2-Chinese_Traditional.zip::http://downloads.sourceforge.net/keepass/KeePass-2.34-Chinese_Traditional.zip"
        "KeePass2-Croatian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.29-Croatian.zip"
        "KeePass2-Czech.zip::http://downloads.sourceforge.net/keepass/KeePass-2.34-Czech.zip"
        "KeePass2-Danish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.29-Danish.zip"
        "KeePass2-Dutch.zip::http://downloads.sourceforge.net/keepass/KeePass-2.34-Dutch.zip"
        "KeePass2-Finnish.zip::http://downloads.sourceforge.net/keepass/Finnish-2.18.zip"
        "KeePass2-French-b.zip::http://downloads.sourceforge.net/keepass/KeePass-2.34-French-b.zip"
        "KeePass2-German.zip::http://downloads.sourceforge.net/keepass/KeePass-2.34-German.zip"
        "KeePass2-Greek.zip::http://downloads.sourceforge.net/keepass/KeePass-2.21-Greek.zip"
        "KeePass2-Hungarian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.33-Hungarian.zip"
        "KeePass2-Indonesian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.23-Indonesian.zip"
        "KeePass2-Italian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.34-Italian.zip"
        "KeePass2-Japanese.zip::http://downloads.sourceforge.net/keepass/KeePass-2.34-Japanese.zip"
        "KeePass2-Korean.zip::http://downloads.sourceforge.net/keepass/KeePass-2.34-Korean.zip"
        "KeePass2-Latin.zip::http://downloads.sourceforge.net/keepass/KeePass-2.29-Latin.zip"
        "KeePass2-Lithuanian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.33-Lithuanian.zip"
        "KeePass2-Norwegian_NB.zip::http://downloads.sourceforge.net/keepass/KeePass-2.34-Norwegian_NB.zip"
        "KeePass2-Pashto.zip::http://downloads.sourceforge.net/keepass/KeePass-2.29-Pashto.zip"
        "KeePass2-Persian.zip::http://downloads.sourceforge.net/keepass/Persian-2.08.zip"
        "KeePass2-Polish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.34-Polish.zip"
        "KeePass2-Portuguese_BR.zip::http://downloads.sourceforge.net/keepass/KeePass-2.34-Portuguese_BR.zip"
        "KeePass2-Portuguese_PT.zip::http://downloads.sourceforge.net/keepass/KeePass-2.34-Portuguese_PT.zip"
        "KeePass2-Romanian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.22-Romanian.zip"
        "KeePass2-Russian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.34-Russian.zip"
        "KeePass2-Serbian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.23-Serbian.zip"
        "KeePass2-Slovak.zip::http://downloads.sourceforge.net/keepass/KeePass-2.34-Slovak.zip"
        "KeePass2-Slovenian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.34-Slovenian.zip"
        "KeePass2-Spanish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.34-Spanish.zip"
        "KeePass2-Swedish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.30-Swedish.zip"
        "KeePass2-Turkish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.34-Turkish.zip"
        "KeePass2-Ukrainian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.34-Ukrainian.zip"
        "KeePass2-Vietnamese.zip::http://downloads.sourceforge.net/keepass/KeePass-2.34-Vietnamese.zip")
sha512sums=('1fe1f54be3beefa84e6487335fd2fe77f370d7e9d826c043aea6a4be5222e5637c9f9412831eea7961ba53232817f2cafe469bd6cffc6afc7ea1feace811f902'
            'd0c0b4ea5ddc77895c0fbb1ed556fd5630d825f0e03f5c3bcf7f9672ca5124fa80e04e244c1cfb9a77d2fd0598fcfde8d8f5aa63e99ee9c5d0be4c5729084d88'
            'cf6b03a73f0b03ca9079db7c543f0f07896e70a8665a0246ed23b395e27f42a41f0d2e0a5837471f0b94fd5f763d94f63ae6448781b8dadecbff8f8fe2e79f7c'
            'be3675bbbe47d929a1ca6c5dfefd31b674c7304cc4bfac914d5be9656937554919478feb363fd3a51561bcf879941fcb54b701648057422c452bf677d500a839'
            '121984df8a67b46d243113637227fe36d7b65a699a30704435e65c5c7003d28552dfe3510759db4e149c274eaa18f92232b60faa18f9e4312f87012c95579ff8'
            '8548df07918d101548e828e038bda9c593f909f17cd11cb568c987094b19ed66306f79e3e58d3128a3aeef20deb7061f9c1f1fc001e28aef355b42ec75a519d2'
            '39b635e0c770cd4d4e624a4a591622198fa9db8fd2a3cd2478283daa1ec3b002d4bbfbdbd26a1a577f47eafb6c65999d2347a6afd00506f7e31f67af217f1c0b'
            '44e15253588821eb747ec39dac4a9d591ae4b4ae5b594e2cb3c1eb05103546d0e2a59515692b5154dacd8b14bdab3381f50b80cbc9c608b52294261a85c1167a'
            'a3584859709ef51bbf68f1703eb82178686d1694bdbf1a8ad992f6023bcfe67269313e1279e75c5450b59e693037dd93ab87285c8f43cb60e2dcd75bfc216020'
            'b9e03515664a40bd6ce6704360ae58a5a23574f0cfe05ea11f1e5c121756811472d098f94dcaa391d82545ea7353f155c69b53d9cf4d40738e34f16ed33f1301'
            '6e67c725993c75c4c86fdbfcebe6f3a205803fa81750777a881497fd53409cdd88f49fb04ccd7dd9c88c6e02beedfa7a87c29aa667f470022b76485b9d52f40e'
            'c2b905d4d747740c6b64f0a5d0825e88e43e772f06f19b3040d018b52a3e5acdb475df366f108c20fb2fb6b5efdb9b9ed8a72a4239d76552ea584c146220ec67'
            '13e8932a8834433c0cd941876ed685eaf960a1ed7cdf76db732c4ff6342ffb9a6287e655edd944b3153e4070a737f0b8a9f281d16e20e2796e18bce14a316ec8'
            '689e7f5297166240188d18777a299babde7421be914d0c439d445c884070b3ad56ef4d3aba7ffcf24196517391b509641f90dec85215ce7f3e0ec30d38a3bf39'
            'f21efafe657494c3a6051b156c27408d2b3a4f39c6a605cb01b43812dc6934abe11c2664ca0f629dd63568cf9e7e6606ec5876161acf0a6d9b084a53c561d3ec'
            'c26806030b4fa681a781f5fff6fb88fcc4cc25672d163de4f78a81fe70e5d0a54cadda9667756ab8461aaef42a1d3183e5b9baa2dd1654acfa16672238b82173'
            '691cf98e6b446ff9ccf26b3de886115a2ef6d9af4c30b8da882a439ea69a9e4a586823776a7f4c62499381f5f998df3d55c8bbce5e4026c0eddde374d763da02'
            'fc4926c62a7fa7bed1394535b7245b7abe3ac33af5f3e06bb6358dbf62fcfb967e4528f85043351ee1e030960627abc74afb8f6b145c6bf3ce56f81691ba18fb'
            'd8e2b7e74845d4ba797dce9ed7e351e17be7923e05104b56dbea27ec3970c35d123b8cef75d5b2944f4e80b703bfbfbd06f0d038a22e02c70655d8304d262500'
            '15b1e1c320ad7d1eccaed221cbd88514e736aa3b1fb0ccb3a6e2ec49225f27d54f38f8e22a671e21ec03b1aec76310b0e2ae0f4375a12a7115b34a1d578db609'
            '6ee5b5af1502eb7f9a3d09ad68d1c8b7c5be161befeaea6dea8a634fa7a606ef40e97d8a1bc8bbca7e29b38b327cf3d739e0c48aef6adf0290d53f7ce3a45d5b'
            'af80a6a57248c14ef710fdfac05531d42fe937105e62c15de4ecf16185e998b2c8719b4b32e1eb4bf1fc0b7cb577f97565a94d20778efd5ab65b59c5baddb3c2'
            '6c7506b528e764d0b433424f41d112ef50b6cd78a37b1f40eb89fdee70d029ed44652c4579f6502bf01ba0ba3fd6235d2ca13bd62d1a693b5a7fae53c125410b'
            '2784cc6bef0d8ba8b7a1c2c32b5ebc2e1fc1a77cfb0b79f0c6b6d255ab311990deaf76985ea4dddfede30057af79db85ebe2d3de6b633fc7c3726b3ad161d71d'
            '17c185bbc43090d4d22e137441e97c868c4cd6417d120bc72509b008a85a8b0eab0ca0b4e4f7f3e8030b01dc0b5e126f2d71108f176bfef59133e43b651b093a'
            '2c274ae696d20299aaa9b9c7f5fe22876fee9c852e1a6f6cfe31b137f5df6d55dc38565df86e3fa567ed20e9af71c59b33821a08d825f0ee2edbf81f86d21da3'
            '1dacd32d7dcb5fda2f97d81a9868e07966714eb7418c39ab5b80734806e79e10d23735e6800453370b4c69ca4bf721fab908dc9ae5ab2be8b8d1c8c72abed338'
            '732ae6ea581c1a6659efce5d964596c7e86cd6c49d5aa3532133f338dc6364877c67291e909dc071505857d1d85eed4bdeea31d59d21cddfec07773b285a7459'
            '2dd0e60f78f1268f9a5168281d7b2b2255cfdb19623e38a94ed49f3bedff0c6282d351440eb796508ed0ba6fe2bcba70f110523977462af72e3736ff4e4ba9d0'
            'c5b393380b0ddbfe22ab48c4175d963a1d0e730afbf1835696708cf542ca30ead26b65d42628cb0b8fcb54ed1a545177ecb4720c21a2f86d8af4b0f3f2bc81e9'
            'dc1954d28115c4e9ecd33d102414b3b4e1b656d71a8b23ccafdc8a977be99db1b737f2d8762ac0dfbe6c171e7bfbf5841c090383ecad5c4c986b0012c07ca486'
            'e5b90aa6dea5a635020b4b6906ec230f894113320be33db5d9b56cb82c27919c9364fbf97c55f7214daa4b69292583b93690470cb0f8fda778fb1043ccd9644e'
            'b7535b8273da09ab0066edb99aac2b24c0d8b40adb933d5754930d3abee9e7e4293def191c28e2e79bbd23acbdc52a2183477ac7afa0124951b8c6ed3d909064'
            '2c8d0df60d5518d0f55b9fb6dce6b23c8134877a27572a0cb19c37c41f9fb109060898a35a62d77c6fcd8272ec7c9e0138406997db49d13b2dcf7d2cbab540f5'
            'b3d2c0b83be661eeb9a7ae2605cb1a3b36ba2390725c073b7f88cff2fd68dcc1ad35c9cd508b21e0ddd26d8472c023e724014ffa65060d7de8a0b36ec5488ab5'
            'e8dc39021d8b66ad14fa839103904a4ffa3b885941857475160ef81079d39cb302b456d54cde9c1db61bfce1f822fad40bddeb0e95b86bd8f7be621c70e352ce'
            'f10b4bb4d4e661228e8e249a04dcc49f3611400bf4f0ff584492aef61469aa73386e6ece7270fc445acbdad7454c7a3301bf12bb94d7aeb1e5f9fed940bb4496'
            '62cae33d53c9d7d18aa91e02b4001c2c544ea5b05dbf4ed0bdb29ad4485ca0c92a77d53278f376d3d1fe67d2e3399ab8600095c813d57b5c40098581b4475abd'
            '689da3f7c88c6ecbba967c29dfdfe3083044109cdbad8808ce7a234789018a66a40f9171e107271530bca8a4cecc135ed5f3cdd81100dad2e41cd63647954ee9')
noextract=("KeePass2-TrlUtil.zip")

prepare() {
    unzip -o "KeePass2-TrlUtil.zip" -d "TrlUtil"
    # when KPScript.exe is lowercased, it fails to load, so let's just keep everything as is
    # _lc *
}

package() {
    a="${pkgdir}/apps${_apparch}/${_realname}"
    mkdir -p "${a}"
    cp -r *.{exe,exe.config,dll,lngx} "KeePass.config.xml" "TrlUtil" "XSL" "${a}"
    cp "KeePass.config.xml" "${a}/TrlUtil"

    d="${pkgdir}/docs${_apparch}/${_realname}"
    mkdir -p "${d}"
    cp *.{chm,txt} "${d}"
}
