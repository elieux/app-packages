# Maintainer: David Macek <david.macek.0@gmail.com>

_realname=keepass
_apparch=32
pkgbase="app-${_realname}"
pkgname=("app-i686-${_realname}")
pkgver=2.35
pkgrel=1
pkgdesc="Light-weight and easy-to-use password manager"
url="http://keepass.info/"
arch=('any')
license=('GPL2')
makedepends=("unzip")
provides=("${pkgbase}")
options=(!strip)
source=("KeePass2.zip::http://downloads.sourceforge.net/${_realname}/KeePass%202.x/${pkgver}/KeePass-${pkgver}.zip"
        "KeePass2-TrlUtil.zip::http://keepass.info/download/v2_trlutil/TrlUtil-${pkgver}.zip"
        "KPScript.zip::http://keepass.info/extensions/v2/kpscript/KPScript-${pkgver}.zip"
        "KeePass.config.xml"
        "KeePass2-Bulgarian.zip::http://downloads.sourceforge.net/keepass/Bulgarian-2.10.zip"
        "KeePass2-Burmese.zip::http://downloads.sourceforge.net/keepass/Burmese-2.19.zip"
        "KeePass2-Catalan.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-Catalan.zip"
        "KeePass2-Chinese_Simplified.zip::http://downloads.sourceforge.net/keepass/KeePass-2.34-Chinese_Simplified.zip"
        "KeePass2-Chinese_Traditional.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-Chinese_Traditional.zip"
        "KeePass2-Croatian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.29-Croatian.zip"
        "KeePass2-Czech.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-Czech.zip"
        "KeePass2-Danish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-Danish.zip"
        "KeePass2-Dutch.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-Dutch.zip"
        "KeePass2-Estonian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-Estonian.zip"
        "KeePass2-Finnish.zip::http://downloads.sourceforge.net/keepass/Finnish-2.18.zip"
        "KeePass2-French-b.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-French-b.zip"
        "KeePass2-German.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-German.zip"
        "KeePass2-Greek.zip::http://downloads.sourceforge.net/keepass/KeePass-2.21-Greek.zip"
        "KeePass2-Hungarian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-Hungarian.zip"
        "KeePass2-Indonesian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.23-Indonesian.zip"
        "KeePass2-Italian-c.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-Italian-c.zip"
        "KeePass2-Japanese.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-Japanese.zip"
        "KeePass2-Korean.zip::http://downloads.sourceforge.net/keepass/KeePass-2.34-Korean.zip"
        "KeePass2-Latin.zip::http://downloads.sourceforge.net/keepass/KeePass-2.29-Latin.zip"
        "KeePass2-Lithuanian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.33-Lithuanian.zip"
        "KeePass2-Norwegian_NB.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-Norwegian_NB.zip"
        "KeePass2-Pashto.zip::http://downloads.sourceforge.net/keepass/KeePass-2.29-Pashto.zip"
        "KeePass2-Persian.zip::http://downloads.sourceforge.net/keepass/Persian-2.08.zip"
        "KeePass2-Polish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-Polish.zip"
        "KeePass2-Portuguese_BR.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-Portuguese_BR.zip"
        "KeePass2-Portuguese_PT.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-Portuguese_PT.zip"
        "KeePass2-Romanian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.22-Romanian.zip"
        "KeePass2-Russian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-Russian.zip"
        "KeePass2-Serbian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.23-Serbian.zip"
        "KeePass2-Slovak.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-Slovak.zip"
        "KeePass2-Slovenian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-Slovenian.zip"
        "KeePass2-Spanish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-Spanish.zip"
        "KeePass2-Swedish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.30-Swedish.zip"
        "KeePass2-Turkish.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-Turkish.zip"
        "KeePass2-Ukrainian.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-Ukrainian.zip"
        "KeePass2-Vietnamese.zip::http://downloads.sourceforge.net/keepass/KeePass-2.35-Vietnamese.zip")
sha512sums=('877825e7cd581140ac555f20044ae7f18471c20caedb439e248559b3af600fda841e811b0841fc94e1fbaf69d02854b1beaa845aa9f38ea412a24cd94d173d42'
            'af085a0398109df5291a0595e24557eaef5c84ccd2dd0f8e813f03d0d7bc780a30e628f709cf18f7c255c62995031c0b007756a2d0e7e867124d104c28a1f306'
            '8af8ed0476c3bf158cb2d255749c328600c35c1b77aca69c4b7cb7e26c778faac129699aa630ddb95f8dee58675bd0e3889a39346d144a5b595a1af5c541adc3'
            'be3675bbbe47d929a1ca6c5dfefd31b674c7304cc4bfac914d5be9656937554919478feb363fd3a51561bcf879941fcb54b701648057422c452bf677d500a839'
            '121984df8a67b46d243113637227fe36d7b65a699a30704435e65c5c7003d28552dfe3510759db4e149c274eaa18f92232b60faa18f9e4312f87012c95579ff8'
            '8548df07918d101548e828e038bda9c593f909f17cd11cb568c987094b19ed66306f79e3e58d3128a3aeef20deb7061f9c1f1fc001e28aef355b42ec75a519d2'
            '37ec9c814b6830ae362c6a03f3fcdc2f08834813e412f2af594c12b3a5411377634c8b36a85d17fd987826a180c7891265b5dc467594c25ca3057b3b13331105'
            '39b635e0c770cd4d4e624a4a591622198fa9db8fd2a3cd2478283daa1ec3b002d4bbfbdbd26a1a577f47eafb6c65999d2347a6afd00506f7e31f67af217f1c0b'
            '30d4e0a18ab9aed36106fdf859458ae47c7bf46cb3ea72048e161dbc0d70d5e6007af3d0fca47ee6800beb8032079af7f834c2096d8dbeffbe275599e0ee92c7'
            'a3584859709ef51bbf68f1703eb82178686d1694bdbf1a8ad992f6023bcfe67269313e1279e75c5450b59e693037dd93ab87285c8f43cb60e2dcd75bfc216020'
            '37854ac2fed54454b33bbfb994281e44d2daa4fe184288fc299de263e03e4ea850b9a37edee4fb395a9aceddf22a21696f10d2c2f567320bd4114105294d2596'
            '3465373d52c6e9c106b425dde4b2fe4b713cb4ee036118bb186c5cbee24655fe648afe6b3c82e050a8e77a49cb053f203e415727db8afe83c3971e2ca35e762a'
            '621c5ef13191b2ef0e49b0ac187b121d9a13a324f2bc702437a3b9fe606d468d519c441c2e296990f7a0c3b78f79b29f8101a50679d0ffcbf58d261e2841fd78'
            '175757219f354272d03a03226f2da97f21b4ed0dbb8f9e6100e29e46df62bc50be406d33252b958a842a28c72f8b9828d875d2b4e325a1948c6ad7761ba34b5c'
            '13e8932a8834433c0cd941876ed685eaf960a1ed7cdf76db732c4ff6342ffb9a6287e655edd944b3153e4070a737f0b8a9f281d16e20e2796e18bce14a316ec8'
            'd1b99b121218e56d780111307a002b65d65df863c9cf3b68d54df37c9941ccc4a700445f47c9c0f3f88081ad41226ff7900c588c35f325c2418fe1f906a6f544'
            'bfaa541fcc543cc3c3982d702e6310b1783c3ae08415407d14644728360599d29a30b61e3d7a04680dffa00d3e1ecf296c7f290289c7590c2f95bd38ba5f90a9'
            'c26806030b4fa681a781f5fff6fb88fcc4cc25672d163de4f78a81fe70e5d0a54cadda9667756ab8461aaef42a1d3183e5b9baa2dd1654acfa16672238b82173'
            '1c1a477ceb29f1359302c985ac93a7193b114c3e6a3e27c4bb2bb47495296b17ab259549f1f890debcbbc16de15dc85b483300430385946aa55e29ea5d3bd5cd'
            'fc4926c62a7fa7bed1394535b7245b7abe3ac33af5f3e06bb6358dbf62fcfb967e4528f85043351ee1e030960627abc74afb8f6b145c6bf3ce56f81691ba18fb'
            'a51df40ce703102d9c0ea8943344821fadbf312811acc27ccf942617ef84e9048d26f2e8b861630656e792ccd1c135b43acc79f74c29eddefe2e473e5a0c44f2'
            '9b1f90ed0ee37b711a6044796082114779f908c74ac84f1e9d52f267fe8b7fbfa05e9762944404fe9bfe84ae11d37a362152600ee42b97cc65eb3bbc7b5e9408'
            '6ee5b5af1502eb7f9a3d09ad68d1c8b7c5be161befeaea6dea8a634fa7a606ef40e97d8a1bc8bbca7e29b38b327cf3d739e0c48aef6adf0290d53f7ce3a45d5b'
            'af80a6a57248c14ef710fdfac05531d42fe937105e62c15de4ecf16185e998b2c8719b4b32e1eb4bf1fc0b7cb577f97565a94d20778efd5ab65b59c5baddb3c2'
            '6c7506b528e764d0b433424f41d112ef50b6cd78a37b1f40eb89fdee70d029ed44652c4579f6502bf01ba0ba3fd6235d2ca13bd62d1a693b5a7fae53c125410b'
            '7d7ce74fc8f1685d52f249e2a25b44c64c66d7efc1034b445cdb74cc7bb44df7160035e11f4f6a06a8332a9c5e5ea2a368adf2b23c73c58ee0354108b57953ca'
            '17c185bbc43090d4d22e137441e97c868c4cd6417d120bc72509b008a85a8b0eab0ca0b4e4f7f3e8030b01dc0b5e126f2d71108f176bfef59133e43b651b093a'
            '2c274ae696d20299aaa9b9c7f5fe22876fee9c852e1a6f6cfe31b137f5df6d55dc38565df86e3fa567ed20e9af71c59b33821a08d825f0ee2edbf81f86d21da3'
            '176a01992d8dbf89f3c1858bc7b89d87c6695e8f06ac4779dfd895067196d05b57fcec25ec4fbfca6aefa7704b4dc6e88c69b8d0f3481ec61438c807a1c74c05'
            '0c8b7230ba2a359a8c6aee599dbbb2ae6fe4abeb5af3ebfef24f1c5524108eb2a955b30c777d7e3d02e314827194cd7ccdde78caf2027284ffcdc6349cfc5ac4'
            '4226225117858fd7263bdb47a62b24bc18cf11bfa70c0d7c9af2419d08e328b7c7c7cd07236a142f006e0033a5c51efc238b75cbe32e307343a55af1cab4b209'
            'c5b393380b0ddbfe22ab48c4175d963a1d0e730afbf1835696708cf542ca30ead26b65d42628cb0b8fcb54ed1a545177ecb4720c21a2f86d8af4b0f3f2bc81e9'
            '7bb83f8a36489459d2bcab38e63123568f6802367795c8bfd0579c0f5a1cda4c51f1ef10f5c3e831ae8544bdb5ee8bbecef14581454348f3e587effd46b2f504'
            'e5b90aa6dea5a635020b4b6906ec230f894113320be33db5d9b56cb82c27919c9364fbf97c55f7214daa4b69292583b93690470cb0f8fda778fb1043ccd9644e'
            'e5f3e92f155f77af53d3e6755edbd055094ca545239bd174dac3feb6160e56757a77f129923045c1add09363b85e473cffbfe010f49253961ad0d78510d224f8'
            '9c6bdb1f79119ea9a0ee72cc72f2590bc4e9d3585802db9a01d144d3ad4f35e8ae19b7aeb39d3e972799da50847cb99e517bea7e7dd772549d5d55318438a02b'
            '92fe18e519464758d60a20556a36b43c94cdc220e6b40053c293b81db83d76afb1ada53db99841da1c59a1bd141b10c01a1a1f7a5e6bdd3cfeb05e1787b7c103'
            'e8dc39021d8b66ad14fa839103904a4ffa3b885941857475160ef81079d39cb302b456d54cde9c1db61bfce1f822fad40bddeb0e95b86bd8f7be621c70e352ce'
            'fc6cab269bfdff22484da29f470dcc591c9d3b7ffa3eb267cc30e4d240dce0c903bc9ca28ad4e11423ac1db0de93742e79400c18c82977a9ff403a15e74ddc37'
            '286271b78ceab6bafaa69e66da80e79c7d3379423aab2441399209dbd8b4867f3621c9e2b2dffd7c8646b349236e6b7e5cf6e8592a89f0d1d3efc107bf855b84'
            'ea3267c13a05ac66e419088d7174edb79924996425d437bac631fb426463441a163e2390509a090277a30932729983d003c9f008a93ea871d9f49fdd331b2ff3')
noextract=("KeePass2-TrlUtil.zip")

prepare() {
    unzip -o "KeePass2-TrlUtil.zip" -d "TrlUtil"
    # when KPScript.exe is lowercased, it fails to load, so let's just keep everything as is
    # _lc *
}

package() {
    a="${pkgdir}/apps${_apparch}/${_realname}"
    mkdir -p "${a}"
    cp -r *.{exe,exe.config,dll,lngx} "KeePass.config.xml" "TrlUtil" "XSL" "${a}"
    cp "KeePass.config.xml" "${a}/TrlUtil"

    d="${pkgdir}/docs${_apparch}/${_realname}"
    mkdir -p "${d}"
    cp *.{chm,txt} "${d}"
}
