# Maintainer: David Macek <david.macek.0@gmail.com>

_realname=keepass-plugin-keeotp
_dirname=keepass
_apparch=32
pkgbase="app-${_realname}"
pkgname=("app-i686-${_realname}")
pkgver=1.3.9
pkgrel=1
pkgdesc="A KeePass plugin that calculates TOTP codes"
url="http://bitbucket.org/devinmartin/keeotp"
arch=('any')
license=('MIT')
depends=("app-i686-keepass")
makedepends=("unzip")
provides=("${pkgbase}")
options=(!strip)
source=("KeeOtp.zip::http://bitbucket.org/devinmartin/keeotp/downloads/KeeOtp-${pkgver}.zip")
md5sums=('a3bc96066151d93eb43e9e240a76d6a0')

package() {
    a="${pkgdir}/apps${_apparch}/${_dirname}"
    mkdir -p "${a}/plugins"
    cp "dlls"/*.dll "${a}"
    cp *.plgx "${a}/plugins"
    rm "${a}/KeeOtp.dll"

    d="${pkgdir}/docs${_apparch}/${_dirname}"
    mkdir -p "${d}/plugins/keeotp"
    cp *.txt "${d}/plugins/keeotp"
}
