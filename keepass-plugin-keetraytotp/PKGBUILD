# Maintainer: David Macek <david.macek.0@gmail.com>

_realname=keepass-plugin-keetraytotp
_dirname=keepass
pkgbase="app-${_realname}"
pkgname=("app-i686-${_realname}")
epoch=1
pkgver=0.107.0
pkgrel=1
pkgdesc="A KeePass plugin that adds TOTP to tray menu, entry list and Auto-Type"
url="https://github.com/KeeTrayTOTP/KeeTrayTOTP"
arch=('any')
license=('GPL3')
provides=("${pkgbase}")
replaces=("app-i686-keepass-plugin-tray-totp")
options=(!strip)
source=("KeeTrayTotp.plgx::https://github.com/KeeTrayTOTP/KeeTrayTOTP/releases/download/v${pkgver}/KeeTrayTOTP.plgx"
        "KeeTrayTOTP.zip::https://github.com/KeeTrayTOTP/KeeTrayTOTP/archive/v${pkgver}.zip")
sha512sums=('275687c58952af4805672823b051f2f1d8e9f0f566ed376f3ddf14d5036777abc0c9a649bbd63b8daa6f5d8d09c8cfa60deccd490d204e0fe73b4995671ea699'
            '2ffc22b964ea77b3eeb43e79129b2f2488126c521648323f19b6e92e25e4ff014972078793300b182cd3bf7f5ce8ee0e14f2cda07d686e17a884077c5de32cb0')

package() {
    depends=("app-keepass")

    local a="${pkgdir}/apps/${_dirname}"
    mkdir -p "${a}/Plugins" "${a}/Plugins/keetraytotp"
    cp *.plgx "${a}/Plugins"
    cp -R "KeeTrayTOTP-${pkgver}"/{README.md,LICENSE,docs/*} "${a}/Plugins/keetraytotp"
}
