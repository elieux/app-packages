# Maintainer: David Macek <david.macek.0@gmail.com>

_realname=avidemux
_choconame=avidemux
pkgbase="app-${_realname}"
pkgname=("app-x86_64-${_realname}")
epoch=1
pkgver=2.7.8
pkgrel=1
pkgdesc="Graphical tool to edit video (filter/re-encode/split)"
url="http://www.avidemux.org/"
arch=('any')
license=('GPL2')
makedepends=("p7zip")
provides=("${pkgbase}")
options=(!strip)
source=("avidemux__win64.exe::https://downloads.sourceforge.net/avidemux/avidemux_${pkgver}__win64.exe")
sha512sums=('b647b4684bf4b5808c7fd27fc4897b9e16defcb193ebc62dae7d545c217d55c06ea746c7b39e7533d7343254797f2fc15ea12913f9dbc1fff1bb2b89f9c89439')

prepare() {
    rm -fR "avidemux__win64.dir"
    echo u | 7z x -bd "avidemux__win64.exe" -o"avidemux__win64.dir" > /dev/null
}

package() {
    local a="${pkgdir}/apps/${_realname}"
    mkdir -p "${a}"
    cp -R "avidemux__win64.dir"/* "${a}"
    rm -R "${a}"/'$PLUGINSDIR' "${a}/uninstall.exe"
}
