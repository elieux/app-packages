# Maintainer: David Macek <david.macek.0@gmail.com>

_realname=google-drive
_apparch=32
pkgbase="app-${_realname}"
pkgname=("app-i686-${_realname}")
pkgver=1.19.8406.6504
pkgrel=1
pkgdesc="The Google Drive synchronization tool"
url="http://www.google.com/drive/"
arch=('any')
license=('custom')
provides=("${pkgbase}")
options=(!strip) # embedded data
source=("http://dl.google.com/drive/${pkgver}/gsync.msi")
md5sums=('1576bcf64f4692ee71a770a32416fe9e')

build() {
    cd "${srcdir}"
    msiexec -a "gsync.msi" "TARGETDIR=$(cygpath -w "${srcdir}/msi${_apparch}")" -qn
}

package() {
    mkdir -p "${pkgdir}/apps${_apparch}/${_realname}"
    cp "${srcdir}/msi${_apparch}/Google/Drive"/*.{dll,exe} "${pkgdir}/apps${_apparch}/${_realname}"
    cp -R "${srcdir}/msi${_apparch}/Google/Drive/Languages" "${pkgdir}/apps${_apparch}/${_realname}/languages"
}
