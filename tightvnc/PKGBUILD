# Maintainer: David Macek <david.macek.0@gmail.com>

_realname=tightvnc
_choconame=tightvnc
pkgbase="app-${_realname}"
pkgname=("app-x86_64-${_realname}")
epoch=1
pkgver=2.8.78
pkgrel=1
pkgdesc="Light weight VNC implementation"
url="https://www.tightvnc.com/"
arch=('any')
license=('GPL2')
replaces=("app-i686-${_realname}")
makedepends=("app-lessmsi")
provides=("${pkgbase}")
options=(!strip)
source=("tightvnc-gpl-setup-64bit.msi::https://www.tightvnc.com/download/${pkgver}/tightvnc-${pkgver}-gpl-setup-64bit.msi")
sha512sums=('4de822a10ba1a7c0416bf5f8f23a199e7e673d6f2b867fa7fdde0b21dd2ef76d6b27accff72ecf7f679b55959271f379da192d701baf97eca5090d7da2e1e3bd')

build() {
    rm -fR "tightvnc-gpl-setup-64bit"
    /apps/lessmsi/lessmsi x "tightvnc-gpl-setup-64bit.msi" > /dev/null
}

package() {
    local a="${pkgdir}/apps/${_realname}"
    mkdir -p "${a}"
    cp -R "tightvnc-gpl-setup-64bit/SourceDir/PFiles/TightVNC"/* "${a}"
}
