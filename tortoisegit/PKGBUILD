# Maintainer: David Macek <david.macek.0@gmail.com>

_realname=tortoisegit
pkgbase="app-${_realname}"
pkgname=("app-i686-${_realname}"
         "app-x86_64-${_realname}")
pkgver=2.5.0.0
pkgrel=1
pkgdesc="Git client implemented as a Windows shell extension"
url="https://tortoisegit.org"
arch=('any')
license=('GPL2')
provides=("${pkgbase}")
options=(!strip)
source=("TortoiseGit-32bit.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-${pkgver}-32bit.msi"
        "TortoiseGit-64bit.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-${pkgver}-64bit.msi"
        "TortoiseGit-LanguagePack-32bit-bg.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-bg.msi"
        "TortoiseGit-LanguagePack-64bit-bg.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-bg.msi"
        "TortoiseGit-LanguagePack-32bit-ca.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-ca.msi"
        "TortoiseGit-LanguagePack-64bit-ca.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-ca.msi"
        "TortoiseGit-LanguagePack-32bit-zh_CN.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-zh_CN.msi"
        "TortoiseGit-LanguagePack-64bit-zh_CN.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-zh_CN.msi"
        "TortoiseGit-LanguagePack-32bit-zh_TW.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-zh_TW.msi"
        "TortoiseGit-LanguagePack-64bit-zh_TW.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-zh_TW.msi"
        "TortoiseGit-LanguagePack-32bit-cs.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-cs.msi"
        "TortoiseGit-LanguagePack-64bit-cs.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-cs.msi"
        "TortoiseGit-LanguagePack-32bit-da.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-da.msi"
        "TortoiseGit-LanguagePack-64bit-da.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-da.msi"
        "TortoiseGit-LanguagePack-32bit-nl.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-nl.msi"
        "TortoiseGit-LanguagePack-64bit-nl.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-nl.msi"
        "TortoiseGit-LanguagePack-32bit-fi.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-fi.msi"
        "TortoiseGit-LanguagePack-64bit-fi.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-fi.msi"
        "TortoiseGit-LanguagePack-32bit-fr.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-fr.msi"
        "TortoiseGit-LanguagePack-64bit-fr.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-fr.msi"
        "TortoiseGit-LanguagePack-32bit-de.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-de.msi"
        "TortoiseGit-LanguagePack-64bit-de.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-de.msi"
        "TortoiseGit-LanguagePack-32bit-hu.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-hu.msi"
        "TortoiseGit-LanguagePack-64bit-hu.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-hu.msi"
        "TortoiseGit-LanguagePack-32bit-id.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-id.msi"
        "TortoiseGit-LanguagePack-64bit-id.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-id.msi"
        "TortoiseGit-LanguagePack-32bit-it.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-it.msi"
        "TortoiseGit-LanguagePack-64bit-it.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-it.msi"
        "TortoiseGit-LanguagePack-32bit-ja.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-ja.msi"
        "TortoiseGit-LanguagePack-64bit-ja.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-ja.msi"
        "TortoiseGit-LanguagePack-32bit-ko.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-ko.msi"
        "TortoiseGit-LanguagePack-64bit-ko.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-ko.msi"
        "TortoiseGit-LanguagePack-32bit-fa.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-fa.msi"
        "TortoiseGit-LanguagePack-64bit-fa.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-fa.msi"
        "TortoiseGit-LanguagePack-32bit-pl.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-pl.msi"
        "TortoiseGit-LanguagePack-64bit-pl.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-pl.msi"
        "TortoiseGit-LanguagePack-32bit-pt_BR.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-pt_BR.msi"
        "TortoiseGit-LanguagePack-64bit-pt_BR.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-pt_BR.msi"
        "TortoiseGit-LanguagePack-32bit-pt_PT.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-pt_PT.msi"
        "TortoiseGit-LanguagePack-64bit-pt_PT.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-pt_PT.msi"
        "TortoiseGit-LanguagePack-32bit-ro.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-ro.msi"
        "TortoiseGit-LanguagePack-64bit-ro.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-ro.msi"
        "TortoiseGit-LanguagePack-32bit-ru.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-ru.msi"
        "TortoiseGit-LanguagePack-64bit-ru.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-ru.msi"
        "TortoiseGit-LanguagePack-32bit-sr-latin.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-sr-latin.msi"
        "TortoiseGit-LanguagePack-64bit-sr-latin.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-sr-latin.msi"
        "TortoiseGit-LanguagePack-32bit-sk.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-sk.msi"
        "TortoiseGit-LanguagePack-64bit-sk.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-sk.msi"
        "TortoiseGit-LanguagePack-32bit-es.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-es.msi"
        "TortoiseGit-LanguagePack-64bit-es.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-es.msi"
        "TortoiseGit-LanguagePack-32bit-sv.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-sv.msi"
        "TortoiseGit-LanguagePack-64bit-sv.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-sv.msi"
        "TortoiseGit-LanguagePack-32bit-tr.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-tr.msi"
        "TortoiseGit-LanguagePack-64bit-tr.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-tr.msi"
        "TortoiseGit-LanguagePack-32bit-uk.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-uk.msi"
        "TortoiseGit-LanguagePack-64bit-uk.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-uk.msi"
        "TortoiseGit-LanguagePack-32bit-vi.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-32bit-vi.msi"
        "TortoiseGit-LanguagePack-64bit-vi.msi::https://download.tortoisegit.org/tgit/${pkgver}/TortoiseGit-LanguagePack-${pkgver}-64bit-vi.msi")
sha512sums=('c6a259575a00eb02e70a1bddf50b7d752b36266e9fa3918c5e37f7cbf9b7a2308bb35bfda24958457740adadd0f7be28b0c04af474ad0e1cb1e14864d87aa614'
            'c4b0ed5efb3c3ffafc05d966f44f7dbfcdddb773172bd1e99890fa58d780ccd429e39f8d375e5a21fefe30024565bef97148e5895813ea0dcb864cf05244ee57'
            'dfdaf24bca125b22dc644328b3932305d60869a9866ec722f1d046303ab59a0be6377210ebf2835236efb0e4e83d7a9733255559a22f3019cc2f9ff14e9c4084'
            '63902693cd1a6b9a54ba583c894d6fba0a3cdace91c954e3d0bc06d091ac026df69c9bc61a63d6a79331ebd070ee22fcff698297fe9ff105f3e47c37ec8615c0'
            '9844b23b734eed54619b35fb8de9ffa6b30665306370b40fa501cc12f0bf8b6d8890165757d9feaa03857c252709b3b240bce9d2df7c27da8d81876672672810'
            '2ae9ffb148c6378fde19b7776045b4ba28b2a8d803b1b9b6d31105e68760dedc1b8c0ebd287425294ca15d53acffb22777f43ea71645dc90a6c6a6e2c7b4f3ed'
            '5eabaff959c9032c5c288656a17050aee3acee1f45be64418cc6eff5672da889ee707efd4002c71026d42ae6fecd514c9fea68219665da1c93e3340345362319'
            '74c4295e10f2dfd86bc11b6341ce9d9be60ac9471add83dfffa0ac8cfe57053956272ae3a3f8d0de3143a7d768d502537c4ff3dcec5d826bd7f5aa8b06166c3e'
            'a1495fb59e70a4f0c851c5c702181864a3b345fe45fd8b1e5fc87f4bb63cded306c684a6b89a12f5e456832dac9684977b265e082c56056bb46355a057397d1c'
            '92fa5dc102bbbb2ca47e648d95899b6b8573997d676d7c645e0f06f9efc265079688c6a27039ec7ee7d09fe25a2f5c61c19279846e6690223c354267e2f8c76d'
            'e3445776d1b74959374be0e0b0d7578c7fae01e534371bae0935ee65dd50d44673d86640b1bc6726b7134e3558c383f65d876ad9002d36a5790b96f5c3157122'
            '5a36eb19c17371d404e77081c4886b1b5d699aed3d0192c1369929499155ccbf09a3b6326ff0a3172898a3229413e9b39fad520c2663ac9f63f290dfe9b1681c'
            '493336f1f0a36b9a239ae461608431228c0eb2d15324a36c14b6acddc3a4303f8a281039cbff92ef0c3ab20c7ae54bbfb2240c92fa414a08e1f1af31ce0348f1'
            'b3de76a217b945e041764f93ede1f32a3189d14703535a97901bf138c54640a5880ef5845b915787cc008a1dc6f234bf95bbae2915472526b02101cd8b2e36ec'
            '6f55dbe5118b612bedf7825fd1cfdb3dac2676eb26488d80abc3b4c7db90f7007395b23fd80d6d1fa9aae4ecd21666d8a85df00711e1fd23ec7e3e3506487976'
            'd5442cb17b63bde0f9ab6b11b01638bdf4d5b6ef26da47173d44e6646cb924b1c7e72ed81f41cfbd9481cabb6c5a1adefc8e68d1de5b08ae3900cecbdb41939a'
            '22c7e24293637b5cd64e0f158bb1d634ba1c9a272361c3303af09c29cfa4a0f817cb7ee0a58f6733a227ec0a480e5a7bd2a5f15834f8d34291d208c4227618fd'
            '77774c45a57df4412d9c1bf48ef0097f82bea8c7ae8ada37e519d8a54c8e6ac73933e5fa7b3eeee103f69e4fc7e02124b9ade3b37bb2524595f47ec0de4caac5'
            '8dc4aa3ce2923f21474e9cdb80dc45b40be896d6470a5ca378b7f021698a0a79d464828a0af83613454e1f1d1469156ba457299dd50f154c16cdd662617e8c32'
            'e7b3e205a266dc58319a7f13a6f84829bf3372efea58709aa67ac391c192776ff71692b35e5bbf9301d1d7b3e6eba445894ee717bc4c7d17dbd74c912f22648d'
            '414f270143576242573fb38c860ad5743ff503748c9ad35dfa1c576d84cb98d1ebc7abb2a71d3ac9fb1dabcd9aecd7905692520bb20fc85614e7f1023c9ed6ff'
            '65a03e2108716a8f1da0f78ba331963f105340445c1e29cd20c3f14037f80aded9262b5c7deafab58b5d11f3dd7ca8a31a3f8a9926c47a64ec757566dd420d74'
            'b2be120f4067db29e346f9400fb053cf03ae6ed1d6ea6f8c66c55f93131318699300a31c2ca8fa01e31984adac80f44f56853cca51712b0e85fc35110b7dfdbd'
            'cce55a8f374a8653fc8c43aa9a59cffc666d7ffd7c0b828e4dacfb114ee0bfb5cb51cb0be662d6c389318761daf7f792fb9c02a4e15f46b77c69b3d6af30399a'
            '61ca4f3690d26c84ed8302abb50ce179de53a6e2b17b6d2924b106625f87eb262998ef406a93de148505955841d8c52a4aa1d516178720e15c9df9d5d1ea2bd2'
            '870beb279a5b4fc8e59814a358b22cca10112104758a1a7157ef5073ac813e0b2aff971b1bf8924631f76e6659e49e0aa32f46449e1bbacf9f08fcbe33527f40'
            '09e4dca40581767dded24ebd11a1b842282cfc86f8571974388e01ed9ffc82397a235416895452052c1cbef9df254fd9707b2a539b552052b1b842c8202a4f87'
            '93c3b36b6696922f351cd5ca37f115c8e41116ec24331f49c9df9916f2e264961237e12ae478265882968dc3246c3235772e1b662a53260635194026ca35dac7'
            'cc18ec551064904fb15a5dae076661dce2a33cf3a130c6590f1cccbcd7a930966355b8ca86514792afa20d6aaf32db9935f8705290cdc8c0493dc53601b7eba5'
            '6dec2dc8bd87078c8187bcbd7842c5dc21c82839755550497be3e119e3347d8aa4dbc575bc1e2151853ac4e217c3f4e7da844a013da08eae52d0aacfb42cdbf8'
            '34f2d4004035694183d323f9c15cce67e66fb23e37186bfa9a291cd24985125010c097de219398665fe45998f47371f7e79775763fd733591fc4d7208f7efdb8'
            '0e77f3783547286b5a39af3a2a2e6198f3c6dcb00bb4e10c6e0c953e06229d7989d891369edefa56f91e356e6adba49bdadd1ccb5263226066eb4362499e5bf9'
            'e3761e59a09071e646d96fd49c690c655d93abec4e43dfb690c98a0c31470bccd7afdf5c031badbcf1d541272686adcecd2c7b682c8158848485b4f761a65584'
            'daec695c9d8b658439d94bb674301360626f66a720e2d95140ebf452c57575a94141c08877e9f9489f29b2a4e1478cbe91a286ed5a6a3a8a49cf40ad9457985c'
            '4bc0b77bfd133915c3810d91c7533c70321bace04007d2b39b32e147bc9c4d739882bd3d5c556f3e271213dd01343d3c8337908fc2080d88a47433acb7ab1e82'
            '0b4fe16762fae607f9a24a1229e0cac0a924bce97dab4314e5ac6c46220abbc4e3050428ff15bde3b2ebf5c3dd215169a1c2a61aa13942a50f9c1455663f7a20'
            '2819fac8293b15c1cfc69d861f3f1d491a732f7c6dd60602eefc6726a9ebe4d18540a3d91bd7bc92df1994b5830f32c1ea670f2d60256e1fb37ec540f2f83d36'
            'c183976ee526335f58d21e40e9384b017283bc93a510f787fd1d4bd284fecec22ec3af29d5926d6fbea596a0d7d46286f6d0cb20df905a1df90733ca74b99475'
            '015c03cd07da5592a94970cd407d0ea9614ce76d774c5124afe7261f706135d16f9df9b12a20c8ddede0ec68ca215c3ecb8bb46c6d589e9185cc61f80174a7bd'
            '4d93b1a49df5d0cf8d45a9504b9cfd881014035c7a5d9e3d2a0174fd84455d5e02a45ac2d645d1b8066c1fbd9b654790245e71ada7928a8f75e101fd128b0a98'
            'd11e16d588ad5ca99a5fc631124942fb93341991342c766f8fa32bf628c80c03c6eb389bf758c71cc0a756d5530645429a18221b0d59fd6de1318b91d0e512a6'
            '0d97bc1bc1ea8ee5a43f4a8591f1d556bb78ca6cb2707c1bdcb0ad5288a4b7ba413b76e642cc90850c7c83037f9871a4631ac61a027c47783df339a5c9db5165'
            'dd421d10df8123b04dc52b249ee1b671f7c0fa1550810bcbce3f535bd974cb9c6538ddd14401302669f5a51918c50a7bda03e78a1a725ae8bfc941c9017e0962'
            '230ab3c452492a78238d251a180422e90d49f9652bead4f0e2eddf77ac20343a339cb536be47d39a1423ae20c97d98e8c5aa1d8fe300887c55deb6bbe8dbd616'
            '378913902ab2014db4b2b45233a889e13492d13c0fc8691f32dff3659c6fb7ed00ffa3685d440ca251cd31634668bf4dbe144576eed4c825624ae8a3db09a10c'
            'df6dc9ae9ba7b9db0f5b03e4c01a15175b3900236c8bf59ad5246294fce227c419662a6b0b6a691001665268d76f3291e2c0a9497abd8297f0cd3a23c8d32335'
            '815d5db80e539aea14d995d8172ab06487e72a94c1e0a8a1c6b4135ff74c8b384166b9aa5feb07a0a470f52879356ca60ddf3504c26c443f3d1d50d265a393f9'
            '33dce8ea6783a9c7a012ced36abda68876dcee9e68a6a983380b48ebe3f6cf4cd65d6aa296613a2cca7618ba108cd83f95c0cb981cb99eb9ecf9bae13ed57cae'
            '6c1cec658669b60c606ab92e3dcf9924aa7da66fd69a7224731765a61b5051fb0745b960d00075b9aefcdd02e4a67cac511105934ef6f1de11a8baad836c9539'
            'd325f9bc914f5e31d16b3a916c8821bab82a28ca67d562c7fabd3307574928b415dad5e4559d7d2243f84d3b06065dc42eb4a278327f401513780ba581e6ffc0'
            '215a9524fcb2d1c02525086fa1ce6022ac2b6611c1be6cf7ee13ea302397644f26f85728f8e64b838199ad0574914a804ed431637c676967c5854d73f4dcbd82'
            '3dc1c67982aa8448d6893e4f8d6c4bce48b1e348feb4e5181db7f62051660538d53855e9aa664a534b1a8bdaf7318f1d41eeff1126d41d0d080101df55961cfe'
            '0cf1891e5d320b69914216f622e2b69efed9b33dd6340f2471bc54477995b4413dd14e49182f98a478a48f9704a10f46fde9ba7ef45a24b06b958d17f61961f0'
            '18dd12a0b585e69105a88d4c33206f84bd7a06cd5cf6d3aa0664d4576edef4cee28d8fa814434ce33934b9a92af2930bed4d5ed0647b605404143ffae0cb105f'
            'e3440fbf7a3aa9f53bcae96231b68b9059df5c126265e30d42236ea290dec4599a0db931e6f7912d66cd1c74d683998d0ba08a7c8fa7613c12a12e317fe7ed70'
            'e54757764de15e586cba654d69cd44402c1becb985bf46567a6ccbc2cfe26b35986246e98f54ddc6b2c9361894f929237872e1794721889fdee265b5888f7b51'
            '6fb844bfb2af8106b36c9fd53c987a185f99054b981338c465f5ae9d23ee4ca54786b773b0294830d2446a40abc334cf66a28ca51a8eadfbf0117999ff92146e'
            '96bbd88e6fc7f11c7a88451a0fe47a8e9ae333fde078c55f6651d978b6745972c34fa06a194681a735d711fcc4006a8deee26c85ebec5b7736059e21069fbb6d')

_lc() {
    local d f n

    for f in "${@}"
    do
        d="$(dirname "${f}")"
        f="$(basename "${f}")"
        n="$(echo "${f}" | tr 'A-Z' 'a-z')"
        if test "${f}" != "${n}"
        then
            mv "${d}/${f}" "${d}/${n}"
        fi
    done
}

_rmmsdll() {
    local ms

    ms=("msvbvm[0-9]+"
        "ucrtbase"
        "mfcm?[0-9]+[a-z]+"
        "msvc[rp][0-9]+"
        "vc([ao]mp|corlib|runtime)[0-9]+"
        "concrt[0-9]+"
        "pgort[0-9]+"
        "api-ms-win-[0-9a-z-]+")
    find "${1}" -iname '*.dll' | grep -Eif <(for m in "${ms[@]}"; do echo "/${m}[.]dll$"; done) | xargs -r rm
}

_build() {
    for f in *${_apparch}bit*.msi
    do
        msiexec -a "${f}" "TARGETDIR=$(cygpath -wa "install${_apparch}")" -qn
    done
    _lc "install${_apparch}/Program Files/TortoiseGit"/*
}

build() {
    for _apparch in 32 64
    do
        _build
    done
}

_package() {
    a="${pkgdir}/apps${_apparch}/${_realname}"
    mkdir -p "${a}"
    cp -r "install${_apparch}/Program Files/TortoiseGit"/* "${a}"
    rm -r "${a}/common"
    _rmmsdll "${a}"

    d="${pkgdir}/docs${_apparch}/${_realname}"
    mkdir -p "${d}"
    mv "${a}"/*.txt "${a}/bin"/*.chm "${d}"
}

package_app-i686-tortoisegit() {
    depends=("app-i686-tortoise-overlays")
    _apparch=32
    _package
}

package_app-x86_64-tortoisegit() {
    depends=("app-x86_64-tortoise-overlays")
    _apparch=64
    _package
}
